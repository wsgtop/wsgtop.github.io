<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Centos 7防火墙命令Centos7和Centos6 防火墙的区别：    Centos 6    Centos 7    工具    使用的是iptable     使用的是firewall    过滤方式    过滤的是数据    能够允许哪些服务可用，那些端口可用。        属于网络防火墙    属于更高一层的防火墙。  Centos7默认安装了firewalld，如果没有安装的话">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2.%20linux/Centos%207%E9%98%B2%E7%81%AB%E5%A2%99%E5%91%BD%E4%BB%A4.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Centos 7防火墙命令Centos7和Centos6 防火墙的区别：    Centos 6    Centos 7    工具    使用的是iptable     使用的是firewall    过滤方式    过滤的是数据    能够允许哪些服务可用，那些端口可用。        属于网络防火墙    属于更高一层的防火墙。  Centos7默认安装了firewalld，如果没有安装的话">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-09-22T11:10:42.699Z">
<meta property="article:modified_time" content="2021-09-22T11:10:42.699Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2.%20linux/Centos%207%E9%98%B2%E7%81%AB%E5%A2%99%E5%91%BD%E4%BB%A4.html" class="article-date">
  <time class="dt-published" datetime="2021-09-22T11:10:42.699Z" itemprop="datePublished">2021-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Centos-7防火墙命令"><a href="#Centos-7防火墙命令" class="headerlink" title="Centos 7防火墙命令"></a>Centos 7防火墙命令</h1><p>Centos7和Centos6 防火墙的区别：<br>    Centos 6    Centos 7<br>    工具    使用的是iptable     使用的是firewall<br>    过滤方式    过滤的是数据    能够允许哪些服务可用，那些端口可用。<br>        属于网络防火墙    属于更高一层的防火墙。<br>  Centos7默认安装了firewalld，如果没有安装的话，可以使用<br>yum install firewalld firewalld-config进行安装。</p>
<p>一、防火墙开启命令</p>
<pre><code>1. 查看防火墙状态 是否启用 
    systemctl status firewalld.service
    或者systemctl status firewalld
    或者 firewall-cmd --state
2. 启动防火墙(即时生效，重启后失效)
    systemctl start firewalld.service
        或者systemctl start firewalld
3. 停止防火墙(即时生效，重启后失效)
    systemctl stop firewalld.service
    或者systemctl stop firewalld
4. 永久禁用防火墙（设置开机禁用）
    systemctl disable firewalld
    或者systemctl disable firewalld.service
5. 永久启用防火墙（设置开机启动）
    systemctl enable firewalld
    或者systemctl enable firewalld.service
6. 重启防火墙
    systemctl restart filewalld
    systemctl reload firewalld.servic
    或者firewall-cmd --reload
</code></pre>
<p>二、 更改防火墙规则<br>    1. 在指定区域打开端口（需要重启防火墙）<br>        firewall-cmd –zone=public –add-port=80/tcp<br>        (永久生效再加上 –permanent)<br>    2. 将接口添加到区域(默认接口都在public)<br>        firewall-cmd –zone=public –add-interface=eth0<br>        (永久生效再加上 –permanent 然后reload防火墙)<br>    3. 更新防火墙规则<br>    firewall-cmd –reload<br>    或者firewall-cmd –complete-reload<br>        (两者的区别就是第一个无需断开连接，就是firewalld特性之一动态添加规则，第二个需要断开连接，类似重启服务)<br>三、防火墙配置<br>        firewalld的配置存储在各种XML文件中，在/usr/lib/firewalld和/etc/firewalld中。这允许极大的灵活性，因为文件可以被编辑、写入、备份、用作其他安装的模板等等。<br>    1. 系统配置目录（/usr/lib/firewalld/services）<br>        目录中存放定义好的网络服务和端口参数，系统参数，不能修改。<br>    2. 用户配置目录（/etc/firewalld/）<br>    3. 如何自定义添加端口<br>        用户可以通过修改配置文件的方式添加端口，也可以通过命令的方式添加端口，注意：修改的内容会在/etc/firewalld/目录下的配置文件中体现。<br>    3.1  命令的方式添加端口：<br>        firwall-cmd –permanent –add-port=9527/tcp<br>    参数介绍：<br>        1、firwall-cmd：是Linux提供的操作firewall的一个工具；<br>        2、–permanent：表示设置为持久；<br>        3、–add-port：标识添加的端口；<br>    另外，firewall中有zone的概念，可以将具体的端口制定到具体的zone配置文件中。<br>    例如：添加8010端口<br>    firewall-cmd –zone=public –permanent –add-port=8010/tcp<br>    –zone=public：指定的zone为public；<br>    如果–zone=dmz 这样设置的话，会在dmz.xml文件中新增一条。<br>    3.2、修改配置文件的方式添加端口</p>
<pre><code>上述的一个配置文件可以很好的看出：
1、添加需要的规则，开放通源ip为122.10.70.234，端口514，协议tcp；
2、开放通源ip为123.60.255.14，端口10050-10051，协议tcp；
3、开放通源ip为任意，端口9527，协议tcp；

开放端口
如下图，使用命令firewall-cmd --zone=publuc --permanent --add-port=8080/tcp 命令

执行命令显示成功后，重新启动防火墙
查看文件 /etc/firewalld/zones/public.xml文件，显示如下，添加端口8080成功


移除端口
执行命令 firewall-cmd --zone=public --permanent --remove-port=8080/tcp
成功后重启防火墙，显示入下图

    查看文件 /etc/firewalld/zones/public.xml文件，显示如下，移除端口8080成功
</code></pre>
<p>四、防火墙其他命令</p>
<pre><code>1. 查看版本
    firewall-cmd --version
2. 查看帮助
    firewall-cmd --help
3. 查看区域信息
    firewall-cmd --get-active-zones
4. 查看指定接口所属区域信息
    firewall-cmd --get-zone-of-interface=eth0
5. 拒绝所有包
    firewall-cmd --panic-on
6. 取消拒绝状态
    firewall-cmd --panic-off
7. 查看是否拒绝
    firewall-cmd --query-panic
8. 设置默认接口区域
    firewall-cmd --set-default-zone=public(立即生效，无需重启)
9. 查看指定区域所有打开的端口
</code></pre>
<p>firewall-cmd –zone=public –list-ports</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2.%20linux/Centos%207%E9%98%B2%E7%81%AB%E5%A2%99%E5%91%BD%E4%BB%A4.html" data-id="ckw6cu3pn000slsdc5hfx8g6h" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/11/18/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>